const imgs=document.querySelectorAll(".wrapper");imgs.forEach((e,t)=>{e.style.setProperty("--i",`${imgs.length-t}`)});let audio=new Audio("./sounds/swipe.mp3");audio.volume=.1;let hearts=[,,].fill().map((e,t)=>{let s=document.querySelector(".like svg").cloneNode(!0);return document.querySelector(".like svg").after(s),s.classList.add("invisible"),s.style.setProperty("--i",`${t}`),s}),played=!1,dislikes=[,,].fill().map((e,t)=>{let s=document.querySelector(".dislike svg").cloneNode(!0);return document.querySelector(".dislike svg").after(s),s.classList.add("invisible"),s.style.setProperty("--i",`${t}`),s});imgs.forEach((e,t)=>{let s,a,i,l,o=t=>{t.preventDefault(),e.classList.remove("active"),i=t.screenX||t.changedTouches[0].clientX,l=t.screenY||t.changedTouches[0].clientY,e.addEventListener("mousemove",r,!1),e.addEventListener("touchmove",r,!1),e.addEventListener("mouseup",e=>{console.log("mouseup"),n(e)},!1),e.addEventListener("touchend",e=>{console.log("mouseleave"),n(e)},!1),e.addEventListener("mouseleave",e=>{console.log("mouseleave"),n(e)},!1),e.addEventListener("touchleave",e=>{console.log("mouseout"),n(e)},!1)},r=t=>{played=!1,s=Number(t.screenX||t.changedTouches[0].clientX)-Number(i),a=Number(t.screenY||t.changedTouches[0].clientY)-Number(l),console.log(e.style.getPropertyValue("transform")),e.style.transform=`translate(${s}px,${a}px) rotate(${Math.floor(57.2958*Math.atan(s/e.offsetHeight))}deg)`},n=o=>{o.preventDefault(),s=Number(o.screenX||o.changedTouches[0].clientX)-Number(i),a=Number(o.screenY||o.changedTouches[0].clientY)-Number(l),console.log(`amountx ${s} amountY ${a}`),Math.abs(s)>50?(played||audio.play(),played=!0,s>50?hearts.forEach(e=>{e.animate([{opacity:.5,visibility:"visible",transform:"translate(0px,-80px) scale(.4)"},],{duration:500,delay:10})}):dislikes.forEach(e=>{e.animate([{opacity:.5,visibility:"visible",transform:"translate(0px,-80px) scale(.4)"},],{duration:500,delay:10})}),t+1<imgs.length&&imgs[t+1].classList.add("active"),e.animate([{opacity:0,visibility:"hidden"},],{duration:100,delay:0,fill:"forwards"})):requestAnimationFrame(()=>{e.style="",e.style.setProperty("--i",`${imgs.length-t}`),e.classList.add("active")}),console.log("stopMoving"),e.removeEventListener("mousemove",r,!1),e.removeEventListener("touchmove",r,!1),e.removeEventListener("mouseup",n,!1),e.removeEventListener("touchend",n,!1),e.removeEventListener("mouseleave",n,!1)};e.addEventListener("mousedown",o,!1),e.addEventListener("touchstart",o,!1),e.addEventListener("dragstart",e=>e.preventDefault(),!1)});